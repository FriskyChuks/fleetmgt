{% extends 'base.html' %}

{% block content %}
<script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.3/dist/umd/popper.min.js" integrity="sha384-eMNCOe7tC1doHpGoWe/6oMVemdAVTMs2xqW4mwXrXsW0L84Iytr2wi5v2QjrP/xp" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/js/bootstrap.min.js" integrity="sha384-cn7l7gDp0eyniUwwAZgrzD06kc/tftFf19TOAs2zVinnD/C7E91j9yyk5//jjpt/" crossorigin="anonymous"></script>

<!-- Button trigger modal -->
<!-- <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#exampleModal">
  Launch demo modal
</button> -->

<!-- Modal -->

<div class="container">
    <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLabel">
              {% if not destination %} Unmapped Destination
              {% else %}  Distance to {{destination}}
              {% endif %}
            </h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            {% if distance == 0.00 %} Your Destination could not be sited on the map, your distance shall be calculated with your driver, thanks!
            {% else %} {{distance}}Km 
            {% endif %}
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Ok</button>
            <!-- <button type="button" class="btn btn-primary">Save changes</button> -->
          </div>
        </div>
      </div>
    </div>

    <br>

          <!-- from here -->
              <div class="card-body">
                <div class="row g-2">
                  <div class="row">
                    <div class="col-sm-12">  
                      <div class="card">
                        <div class="card-header">
                          <h5>Book a Ride here  || <small>kindly fill the form below </small></h5>
                        </div>
                        <div class="col-md-4">
                          <form role="form text-left" method="post" action="">{% csrf_token %}
                            <h6 style="color: green; "> 
                              {{ msg }}
                            </h6>
                            <label>Select Class</label>
                            <div>
                              {{ form.service_class }}
                            </div>
                            <br>
                            <label>Destination</label>
                            <div>
                              {{ form.destination }}
                            </div>
                            <!-- <label>Estimated Distance (in Km)</label> -->
                            <div>
                              {{ form.distance }}
                            </div>
                            <br>
                            <button class="text-success text-gradient font-weight-bold">Click to Book Now</button> 
                            <br><br>
                            This product includes GeoLite2 data created by MaxMind, available from
                            <a href="https://www.maxmind.com">https://www.maxmind.com</a>.                 
                          </form>
                        </div>
                      <div class="card-header">  
                      </div>
                    </div>
                  </div>        
                </div>
                <div class="row">
                  <div class="col-sm-12">  
                    <div class="card">
                      <div class="card-header">
                        <h5>Book a Ride here  || <small>kindly fill the form below </small></h5>
                      </div>
                        <div class="col-md-8">
                          <h4 class="text-success text-gradient"> 
                            Current Location: {% if city.city %} 
                            {{ city.city }} {{ city.country_name }} {% else %} {{ city.country_name }}
                            {% endif %}
                          </h4>               
                            {{ map|safe }}
                        </div>
                      <div class="card-header">  
                      </div>
                    </div>
                  </div>        
                </div>
                </div>
              </div>
  
        

</div>

{% if request.POST and distance is not None %}
  <script>
    $(window).on('load', function(){
      $('#exampleModal').modal('show')
    })
  </script>
{% endif %}

{% endblock content %}